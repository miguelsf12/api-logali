{
  "openapi": "3.0.3",
  "info": {
    "title": "API Logali",
    "description": "**Bem-vindo à documentação da API Logali**.\n\nA API Logali foi projetada para conectar usuários a serviços de acordo com sua localização, facilitando a busca por provedores próximos e a gestão de serviços de forma eficiente.\n\n### Funcionalidades principais:\n- **Autenticação de Usuários**: Registro e login utilizando JWT.\n- **Geolocalização**: Permite a busca de serviços próximos com base na localização atual do usuário.\n- **Cadastro e Gerenciamento de Serviços**: Provedores podem cadastrar, editar e gerenciar os serviços que serão oferecidos aos clientes.\n- **Filtragem de Serviços**: Pesquisa por nome, categoria e proximidade.\n- **Rotas e Distâncias**: Exibe trajetos e calcula distâncias usando integração com as APIs do Google (Directions, Places, etc.).\n\n### Público-Alvo:\n- A API é voltada tanto para **usuários** que procuram serviços quanto para **provedores** que desejam oferecer seus serviços de forma eficiente e localizada.\n\n### Estrutura:\n- A API segue o padrão **REST**, com endpoints bem definidos para autenticação, cadastro de serviços, busca e filtragem.\n- Todas as respostas são padronizadas em formato **JSON** para garantir compatibilidade e fácil integração com outras aplicações.",
    "version": "1.0.0"
  },
  "securityDefinitions": {
    "BearerAuth": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Autenticação JWT. O token deve ser enviado no cabeçalho Authorization como: Bearer {token}"
    }
  },
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "paths": {
    "/user/auth/register": {
      "post": {
        "summary": "Registro de usuário",
        "description": "Rota responsável por cadastrar um usuário e efetuar a autenticação.",
        "tags": ["auth"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "example": "johndoe@example.com"
                  },
                  "cpf": {
                    "type": "string",
                    "example": "123.456.789-00"
                  },
                  "password": {
                    "type": "string",
                    "example": "Abobora123."
                  },
                  "address": {
                    "type": "string",
                    "example": "Rua Exemplo, 123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuário criado com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "_id": { "type": "string", "example": "66ec78d6..." },
                    "name": {
                      "type": "string",
                      "example": "John Doe"
                    },
                    "email": {
                      "type": "string",
                      "example": "johndoe@example.com"
                    },
                    "cpf": {
                      "type": "string",
                      "example": "123.456.789-00"
                    },
                    "password": {
                      "type": "string",
                      "example": "$2b$12$AosPGD2tIU4..."
                    },
                    "address": {
                      "type": "object",
                      "properties": {
                        "address": {
                          "type": "string",
                          "example": "Rua Exemplo, 123"
                        },
                        "type": {
                          "type": "string",
                          "enum": ["Point"],
                          "example": "Point"
                        },
                        "coordinates": {
                          "type": "array",
                          "items": {
                            "type": "number"
                          },
                          "example": [-46.633309, -23.55052]
                        }
                      }
                    },
                    "__v": { "type": "number", "example": 0 }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Algum Parâmetro Incorreto.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid param: 'parâmetro')"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/auth/login": {
      "post": {
        "summary": "Login de Usuário",
        "description": "Rota responsável por autenticar o usuário com identificador (email ou cpf) e senha.",
        "tags": ["auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "identifier": {
                    "type": "string",
                    "example": "johndoe@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "TenhaFe01."
                  }
                },
                "required": ["identifier", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuário autenticado com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Você está autenticado"
                    },
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIU..."
                    },
                    "userId": {
                      "type": "string",
                      "example": "66e87ba04d1d..."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Algum Parâmetro Incorreto.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid param: 'parâmetro')"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/provider/addservice": {
      "post": {
        "summary": "Cadastro de serviços",
        "description": "Rota responsável por cadastrar um serviço fornecido pelo usuário.",
        "tags": ["provider"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string", "example": "SpáRio" },
                  "description": { "type": "string", "example": "Lorem impsum dolor..." },
                  "category": { "type": "string", "example": "spá" },
                  "location": { "type": "string", "example": "Rua Exemplo, 123" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Serviço criado com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": { "type": "string", "example": "SpáRio" },
                    "description": {
                      "type": "string",
                      "example": "Lorem impsum dolor..."
                    },
                    "category": { "type": "string", "example": "spá" },
                    "location": {
                      "type": "object",
                      "properties": {
                        "address": {
                          "type": "string",
                          "example": "Rua Exemplo, 123"
                        },
                        "type": {
                          "type": "string",
                          "enum": ["Point"],
                          "example": "Point"
                        },
                        "coordinates": {
                          "type": "array",
                          "items": {
                            "type": "number"
                          },
                          "example": [-46.633309, -23.55052]
                        }
                      }
                    },
                    "provider": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string",
                          "example": "John Doe"
                        },
                        "email": {
                          "type": "string",
                          "example": "johndoe@example.com"
                        },
                        "cpf": {
                          "type": "string",
                          "example": "123.456.789-00"
                        },
                        "address": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "string",
                              "example": "Rua Exemplo, 123"
                            },
                            "type": {
                              "type": "string",
                              "enum": ["Point"],
                              "example": "Point"
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "number"
                              },
                              "example": [-46.633309, -23.55052]
                            },
                            "_id": { "type": "string", "example": "66ec78d6..." },
                            "__v": { "type": "number", "example": 0 }
                          }
                        }
                      }
                    },
                    "_id": { "type": "string", "example": "66e321d6..." },
                    "__v": { "type": "number", "example": 0 }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Algum Parâmetro Incorreto.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Invalid param: 'parâmetro')"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/provider/editservice/:id": {
      "patch": {
        "summary": "Editar serviço",
        "description": "Rota responsável por editar algum campo específico do serviço",
        "tags": ["provider"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "location": {
                    "type": "string",
                    "example": "Rua Novo Exemplo, 321"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Serviço atualizado com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Serviço atualizado com sucesso"
                    },
                    "newService": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "66ec80..."
                        },
                        "name": {
                          "type": "string",
                          "example": "SpáRio"
                        },
                        "description": {
                          "type": "string",
                          "example": "Lorem impsum dolor..."
                        },
                        "category": {
                          "type": "string",
                          "example": "spá"
                        },
                        "provider": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "object",
                              "properties": {
                                "address": {
                                  "type": "string",
                                  "example": "Rua Exemplo, 123"
                                },
                                "type": {
                                  "type": "string",
                                  "example": "Point"
                                },
                                "coordinates": {
                                  "type": "array",
                                  "items": {
                                    "type": "number"
                                  },
                                  "example": [-46.633309, -23.55052]
                                }
                              }
                            },
                            "_id": {
                              "type": "string",
                              "example": "66e87b..."
                            },
                            "name": {
                              "type": "string",
                              "example": "John Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "johndoe@example.com"
                            },
                            "cpf": {
                              "type": "string",
                              "example": "123.456.789-00"
                            },
                            "__v": {
                              "type": "integer",
                              "example": 0
                            }
                          }
                        },
                        "location": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "string",
                              "example": "Rua Novo Exemplo, 321"
                            },
                            "type": {
                              "type": "string",
                              "example": "Point"
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "number"
                              },
                              "example": [-46.633309, -23.55052]
                            }
                          }
                        },
                        "__v": {
                          "type": "integer",
                          "example": 0
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/provider/removeservice/:id": {
      "delete": {
        "summary": "Remover serviço",
        "description": "Rota responsável por remover um serviço.",
        "tags": ["provider"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Serviço deletado com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Serviço deletado com sucesso"
                    },
                    "deletedService": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string",
                          "example": "66ec95..."
                        },
                        "name": {
                          "type": "string",
                          "example": "SpáRio"
                        },
                        "description": {
                          "type": "string",
                          "example": "Lorem impsum dolor..."
                        },
                        "category": {
                          "type": "string",
                          "example": "spá"
                        },
                        "provider": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "object",
                              "properties": {
                                "address": {
                                  "type": "string",
                                  "example": "Rua Exemplo, 123"
                                },
                                "type": {
                                  "type": "string",
                                  "example": "Point"
                                },
                                "coordinates": {
                                  "type": "array",
                                  "items": {
                                    "type": "number"
                                  },
                                  "example": [-46.633309, -23.55052]
                                }
                              }
                            },
                            "_id": {
                              "type": "string",
                              "example": "66e87b..."
                            },
                            "name": {
                              "type": "string",
                              "example": "John Doe"
                            },
                            "email": {
                              "type": "string",
                              "example": "johndoe@example.com"
                            },
                            "cpf": {
                              "type": "string",
                              "example": "123.456.789-00"
                            },
                            "__v": {
                              "type": "integer",
                              "example": 0
                            }
                          }
                        },
                        "location": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "string",
                              "example": "Rua Exemplo, 123"
                            },
                            "type": {
                              "type": "string",
                              "example": "Point"
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "number"
                              },
                              "example": [-46.633309, -23.55052]
                            }
                          }
                        },
                        "__v": {
                          "type": "integer",
                          "example": 0
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/client/edit/:id": {
      "post": {
        "summary": "Editar usuário",
        "description": "Rota responsável por editar as configurações do usuário.",
        "tags": ["client"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John DoeNew"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Perfil atualizado com sucesso"
                    },
                    "newProfile": {
                      "type": "object",
                      "properties": {
                        "_id": { "type": "string", "example": "66ec78d6..." },
                        "name": {
                          "type": "string",
                          "example": "John DoeNew"
                        },
                        "email": {
                          "type": "string",
                          "example": "johndoe@example.com"
                        },
                        "cpf": {
                          "type": "string",
                          "example": "123.456.789-00"
                        },
                        "address": {
                          "type": "object",
                          "properties": {
                            "address": {
                              "type": "string",
                              "example": "Rua Exemplo, 123"
                            },
                            "type": {
                              "type": "string",
                              "enum": ["Point"],
                              "example": "Point"
                            },
                            "coordinates": {
                              "type": "array",
                              "items": {
                                "type": "number"
                              },
                              "example": [-46.633309, -23.55052]
                            }
                          }
                        },
                        "__v": { "type": "integer", "example": 0 }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/client/send-actual-location": {
      "post": {
        "summary": "Enviar localização",
        "description": "Rota responsável por enviar a localização atual do usuário.",
        "tags": ["client"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "address": {
                    "type": "string",
                    "example": "Praça da liberadade belo horizonte"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "O retorno da API Google Geocoding é formatado para ser mais objetivo.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "address": {
                      "type": "string",
                      "example": "Praça da Liberdade - Savassi, Belo Horizonte - MG, 30140-010, Brazil"
                    },
                    "latitude": {
                      "type": "number",
                      "example": -19.9329185
                    },
                    "longitude": {
                      "type": "number",
                      "example": -43.938381
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/service/get-all-services": {
      "get": {
        "summary": "Resgatar serviços",
        "description": "Rota responsável por resgatar todos os serviços cadastrados.",
        "tags": ["service"],
        "license": {
          "name": "Licença Interna",
          "url": ""
        },
        "responses": {
          "200": {
            "description": "Lista de serviços cadastrados.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string", "example": "SpáRio" },
                      "description": {
                        "type": "string",
                        "example": "Lorem impsum dolor..."
                      },
                      "category": { "type": "string", "example": "spá" },
                      "location": {
                        "type": "object",
                        "properties": {
                          "address": {
                            "type": "string",
                            "example": "Rua Exemplo, 123"
                          },
                          "type": {
                            "type": "string",
                            "enum": ["Point"],
                            "example": "Point"
                          },
                          "coordinates": {
                            "type": "array",
                            "items": {
                              "type": "number"
                            },
                            "example": [-46.633309, -23.55052]
                          }
                        }
                      },
                      "provider": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "example": "John Doe"
                          },
                          "email": {
                            "type": "string",
                            "example": "johndoe@example.com"
                          },
                          "cpf": {
                            "type": "string",
                            "example": "123.456.789-00"
                          },
                          "address": {
                            "type": "object",
                            "properties": {
                              "address": {
                                "type": "string",
                                "example": "Rua Exemplo, 123"
                              },
                              "type": {
                                "type": "string",
                                "enum": ["Point"],
                                "example": "Point"
                              },
                              "coordinates": {
                                "type": "array",
                                "items": {
                                  "type": "number"
                                },
                                "example": [-46.633309, -23.55052]
                              },
                              "_id": { "type": "string", "example": "66ec78d6..." },
                              "__v": { "type": "number", "example": 0 }
                            }
                          }
                        }
                      },
                      "_id": { "type": "string", "example": "66e321d6..." },
                      "__v": { "type": "number", "example": 0 }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/user/service/get-services-filtered{filters}": {
      "get": {
        "summary": "Resgatar serviços com base em filtros",
        "description": "Rota responsável por resgatar serviços cadastrados com base em filtros como: nome, categoria e raio de distância.",
        "tags": ["service"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "category",
            "schema": {
              "type": "string"
            },
            "required": false,
            "description": "Filtrar serviços pela categoria."
          },
          {
            "in": "query",
            "name": "name",
            "schema": {
              "type": "string"
            },
            "required": false,
            "description": "Filtrar serviços pelo nome."
          },
          {
            "in": "query",
            "name": "radius",
            "schema": {
              "type": "number"
            },
            "required": false,
            "description": "Filtrar serviços com base no raio de distância (em quilômetros)."
          }
        ],
        "responses": {
          "200": {
            "description": "Serviços filtrados com sucesso.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "66ec80..."
                      },
                      "name": {
                        "type": "string",
                        "example": "SpáRio"
                      },
                      "description": {
                        "type": "string",
                        "example": "Massagens e meditação."
                      },
                      "category": {
                        "type": "string",
                        "example": "spá"
                      },
                      "location": {
                        "type": "object",
                        "properties": {
                          "address": {
                            "type": "string",
                            "example": "Rua Exemplo, 123"
                          },
                          "type": {
                            "type": "string",
                            "example": "Point"
                          },
                          "coordinates": {
                            "type": "array",
                            "items": {
                              "type": "number"
                            },
                            "example": [-46.633309, -23.55052]
                          }
                        }
                      },
                      "provider": {
                        "type": "object",
                        "properties": {
                          "address": {
                            "type": "object",
                            "properties": {
                              "address": {
                                "type": "string",
                                "example": "Rua Exemplo, 123"
                              },
                              "type": {
                                "type": "string",
                                "example": "Point"
                              },
                              "coordinates": {
                                "type": "array",
                                "items": {
                                  "type": "number"
                                },
                                "example": [-46.633309, -23.55052]
                              }
                            }
                          },
                          "_id": {
                            "type": "string",
                            "example": "66e87..."
                          },
                          "name": {
                            "type": "string",
                            "example": "John Doe"
                          },
                          "email": {
                            "type": "string",
                            "example": "johndoe@example.com"
                          },
                          "cpf": {
                            "type": "string",
                            "example": "123.456.789-00"
                          },
                          "__v": {
                            "type": "integer",
                            "example": 0
                          }
                        }
                      },
                      "__v": {
                        "type": "integer",
                        "example": 0
                      }
                    }
                  },
                  "example": [
                    {
                      "_id": "66ec80...",
                      "name": "SpáRio",
                      "description": "Massagens e meditação.",
                      "category": "spá",
                      "location": {
                        "address": "Rua Exemplo, 123",
                        "type": "Point",
                        "coordinates": [-46.633309, -23.55052]
                      },
                      "provider": {
                        "_id": "66e87b...",
                        "name": "John Doe",
                        "email": "johndoe@example.com",
                        "cpf": "123.456.789-00",
                        "address": {
                          "address": "Rua Exemplo, 123",
                          "type": "Point",
                          "coordinates": [-46.633309, -23.55052]
                        },
                        "__v": 0
                      },
                      "__v": 0
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "example": "johndoe@example.com"
          },
          "cpf": {
            "type": "string",
            "example": "123.456.789-00"
          },
          "telephone": {
            "type": "string",
            "example": "(11) 98765-4321"
          },
          "address": {
            "type": "object",
            "properties": {
              "address": {
                "type": "string",
                "example": "Rua Exemplo, 123"
              },
              "type": {
                "type": "string",
                "enum": ["Point"],
                "example": "Point"
              },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "example": [-46.633309, -23.55052]
              }
            }
          },
          "password": {
            "type": "string",
            "example": "Abobora123."
          }
        },
        "required": ["name", "email", "cpf", "address", "password"]
      },
      "Service": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "SpáRio"
          },
          "description": {
            "type": "string",
            "example": "Lorem impsum dolor..."
          },
          "category": {
            "type": "string",
            "example": "spá"
          },
          "location": {
            "type": "object",
            "properties": {
              "address": {
                "type": "string",
                "example": "Rua Exemplo, 123"
              },
              "type": {
                "type": "string",
                "enum": ["Point"],
                "example": "Point"
              },
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "example": [-46.633309, -23.55052]
              }
            }
          }
        },
        "required": ["name", "description", "category", "location"]
      }
    }
  }
}
